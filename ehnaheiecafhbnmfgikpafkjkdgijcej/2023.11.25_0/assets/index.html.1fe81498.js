import{$ as i,S as n,a as r,i as k,o as p,g as b,E as m}from"./common.8ee52035.js";async function v(){return chrome.bookmarks.getTree().then(e=>{const t=[];o(e[0].children[0].children),o(e[0].children[1].children);function o(c){n.isBookmarkHidden(c.title)||c.forEach(s=>a(s))}function a(c){c.children?n.isBookmarkHidden(c.title)||o(c.children):n.isBookmarkHidden(c.title)||t.push(c.url)}return t})}function l(e,t=300){let o;return(...a)=>{clearTimeout(o),o=setTimeout(()=>{e.apply(this,a)},t)}}let u;async function S(e){const t=i("btn-share-facebook");t==null||t.setAttribute("disabled","disabled"),chrome.runtime.sendMessage({distpatch:"onShare",data:{...u,list:e}}).then(o=>{alert(o?"Share bookmarks success!":"Share bookmarks fail!")}).catch(()=>alert("Share link fail!")).finally(()=>t==null?void 0:t.removeAttribute("disabled"))}function h(e){return e.reduce((t,o,a)=>(a===40&&e.splice(40),`${t}- ${o} 
`),`Collection of useful websites for everyone.
`)}async function d(e){const t=await v();if((t==null?void 0:t.length)<=0)return alert("Don't have anything to share!");switch(await chrome.storage.local.set({share:{type:e,list:h(t)}}),e){case"tw":window.open(`https://twitter.com/intent/tweet?share-bookmark=true&text=${h(t)}`,"_blank");break;case"fb":S(h(t));break;case"li":window.open("https://www.linkedin.com/feed/?share-bookmark=true","_blank");break}}(async()=>{var t,o;u=await chrome.runtime.sendMessage({distpatch:"isLog"}),(t=i("btn-share-link"))==null||t.on("click",l(()=>d("li"))),(o=i("btn-share-twitter"))==null||o.on("click",l(()=>d("tw")));const e=i("btn-share-facebook");e&&(e.on("click",l(()=>d("fb"))),u||e.setAttribute("disabled","disabled"))})();function w(e){const t=e.target;localStorage[parseInt(t.getAttribute("data-button-number"))]=t.selectedIndex}function y(){this.validity.valid&&(localStorage[this.id]=this.value)}function T(){localStorage[this.id]=this.checked}function E(){localStorage.setItem("fontFamily",this.value)}function I(){n.setMaxWidthMeasure(this.value)}function M(){/^#[0-9A-F]{6}$/i.test(this.value)&&(localStorage[this.id]=this.value)}function B(){const e=this.checked;this.parentElement.parentElement.parentElement.querySelectorAll('input[type="checkbox"]').forEach((t,o)=>{if(o>0){t.checked=e;const a=document.createEvent("HTMLEvents");a.initEvent("change",!0,!0),t.dispatchEvent(a)}})}function F(e,t){var o=document.createElement("div");o.setAttribute("class","bookmark");var a=document.createElement("input");a.setAttribute("type","checkbox"),n.isBookmarkHidden(t.title)||a.setAttribute("checked","checked"),a.onchange=function(){n.setBookmarkHidden(t.title,!this.checked)};var c=document.createElement("label");c.appendChild(a);var s=document.createElement("img");s.setAttribute("class","favicon"),s.setAttribute("src",b(t.url)),c.appendChild(s),c.appendChild(document.createTextNode(t.title)),o.appendChild(c),e.appendChild(o)}function f(){const e=this.parentNode.querySelector("li.fgTab");e.setAttribute("class","bgTab"),m.hide(i(e.dataset.tab)),this.setAttribute("class","fgTab"),m.show(i(this.dataset.tab))}function x(){n.resetOptions(),localStorage.removeItem("fontFamily"),localStorage.removeItem("fontSize"),localStorage.removeItem("favIconWidth"),localStorage.removeItem("maxWidth"),localStorage.removeItem("scrollBarWidth"),localStorage.removeItem("showTooltip"),localStorage.removeItem("showURL"),localStorage.removeItem("hideCMOpenIncognito"),r("input[type=color]").forEach(e=>localStorage.removeItem(e.id)),g()}HTMLSelectElement.prototype.selectByValue=function(e){this.selectedIndex=document.evaluate('count(option[@value="'+e+'"]/preceding-sibling::option)',this,null,XPathResult.NUMBER_TYPE,null).numberValue};function g(){i("version").innerHTML=chrome.i18n.getMessage("version",chrome.runtime.getManifest().version),i("fontFamily").selectByValue(n.getFontFamily()),i("fontSize").value=n.getFontSize(),i("favIconWidth").value=n.getFavIconWidth(),i("maxWidth").value=n.getMaxWidth(),i("maxWidthMeasure").selectByValue(n.getMaxWidthMeasure()),i("scrollBarWidth").value=n.getScrollBarWidth(),i("showTooltip").checked=n.isShowTooltip(),i("showURL").checked=n.isShowURL(),i("hideCMOpenIncognito").checked=n.isHideCMOpenIncognito(),r("input[type=color]").forEach(e=>e.value=n.getColor(e.id))}document.addEventListener("DOMContentLoaded",()=>{r("#tabs > li").on("click",f),r(".selectAllBookmarks").on("click",B),r("#uiConfig input[type=number]").on("input",y),r("#uiConfig input[type=checkbox], #switchToNewTab").on("change",T),r("#uiConfig input[type=color]").on("change",M),r("#mouseConfig select").on("change",w),i("resetWindowSettings").on("click",x),i("fontFamily").on("change",E),i("maxWidthMeasure").on("change",I),k.initAll(),f.apply(p("li.fgTab")),chrome.bookmarks.getTree().then(e=>{const t=i("chromeBookmarksSettings");e[0].children.slice(0,2).forEach(o=>{o.children.forEach(a=>F(t,a))})}),g();for(let e=0;e<3;e++)i("btn"+e).selectedIndex=n.getButtonAction(e);n.isSwitchToNewTab()&&(i("switchToNewTab").checked=!0),chrome.fontSettings.getFontList().then(e=>{const t=i("fontFamily").options,o=n.getFontFamily();e.forEach(a=>{t.add(new Option(a.displayName,a.fontId,!1,a.fontId===o))})})});
